"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5664],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>d});var r=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=r.createContext({}),s=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},c=function(e){var n=s(e.components);return r.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(t),d=i,k=m["".concat(p,".").concat(d)]||m[d]||u[d]||o;return t?r.createElement(k,a(a({ref:n},c),{},{components:t})):r.createElement(k,a({ref:n},c))}));function d(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,a=new Array(o);a[0]=m;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var s=2;s<o;s++)a[s]=t[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},79186:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=t(87462),i=(t(67294),t(3905));const o={},a="MinIO \u642d\u5efa",l={unversionedId:"prometheus/ClusterAndHA/7.1-minio-introduction",id:"prometheus/ClusterAndHA/7.1-minio-introduction",title:"MinIO \u642d\u5efa",description:"MinIO \u662f\u4e00\u4e2a\u57fa\u4e8e Apache License v2.0 \u5f00\u6e90\u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u3002\u5b83\u517c\u5bb9\u4e9a\u9a6c\u900a S3 \u4e91\u5b58\u50a8\u670d\u52a1\u63a5\u53e3\uff0c\u975e\u5e38\u9002\u5408\u4e8e\u5b58\u50a8\u5927\u5bb9\u91cf\u975e\u7ed3\u6784\u5316\u7684\u6570\u636e\uff0c\u4f8b\u5982\u56fe\u7247\u3001\u89c6\u9891\u3001\u65e5\u5fd7\u6587\u4ef6\u3001\u5907\u4efd\u6570\u636e\u548c\u5bb9\u5668/\u865a\u62df\u673a\u955c\u50cf\u7b49\uff0c\u800c\u4e00\u4e2a\u5bf9\u8c61\u6587\u4ef6\u53ef\u4ee5\u662f\u4efb\u610f\u5927\u5c0f\uff0c\u4ece\u51e0 kb \u5230\u6700\u5927 5T \u4e0d\u7b49\u3002",source:"@site/wiki/ops/prometheus/07-ClusterAndHA/7.1-minio-introduction.md",sourceDirName:"prometheus/07-ClusterAndHA",slug:"/prometheus/ClusterAndHA/7.1-minio-introduction",permalink:"/zhengxuexian_blog/ops/prometheus/ClusterAndHA/7.1-minio-introduction",draft:!1,tags:[],version:"current",lastUpdatedBy:"zhengxuexian",lastUpdatedAt:1662026865,formattedLastUpdatedAt:"2022\u5e749\u67081\u65e5",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u7b2c\u4e03\u7ae0 \u96c6\u7fa4\u4e0e\u9ad8\u53ef\u7528",permalink:"/zhengxuexian_blog/ops/prometheus/ClusterAndHA/"},next:{title:"Thanos Compactor",permalink:"/zhengxuexian_blog/ops/prometheus/ClusterAndHA/7.10-thanos-compactor"}},p={},s=[{value:"\u4f7f\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u542f\u52a8",id:"\u4f7f\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u542f\u52a8",level:2},{value:"\u4f7f\u7528 Docker \u542f\u52a8",id:"\u4f7f\u7528-docker-\u542f\u52a8",level:2},{value:"\u5982\u4f55\u4f7f\u7528 OpenSSL \u6765\u751f\u6210\u81ea\u7b7e\u8bc1\u4e66",id:"\u5982\u4f55\u4f7f\u7528-openssl-\u6765\u751f\u6210\u81ea\u7b7e\u8bc1\u4e66",level:2},{value:"1. \u63d0\u793a\u5192\u53f7\u592a\u591a",id:"1-\u63d0\u793a\u5192\u53f7\u592a\u591a",level:2},{value:"2. \u63d0\u793a\u5bf9\u65b9\u6ca1\u6709\u4f7f\u7528 HTTPS",id:"2-\u63d0\u793a\u5bf9\u65b9\u6ca1\u6709\u4f7f\u7528-https",level:2},{value:"3. \u4e0d\u80fd\u591f\u8ba4\u8bc1\u67d0\u4e2a\u57df\u540d",id:"3-\u4e0d\u80fd\u591f\u8ba4\u8bc1\u67d0\u4e2a\u57df\u540d",level:2}],c={toc:s};function u(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"minio-\u642d\u5efa"},"MinIO \u642d\u5efa"),(0,i.kt)("p",null,"MinIO \u662f\u4e00\u4e2a\u57fa\u4e8e Apache License v2.0 \u5f00\u6e90\u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u3002\u5b83\u517c\u5bb9\u4e9a\u9a6c\u900a S3 \u4e91\u5b58\u50a8\u670d\u52a1\u63a5\u53e3\uff0c\u975e\u5e38\u9002\u5408\u4e8e\u5b58\u50a8\u5927\u5bb9\u91cf\u975e\u7ed3\u6784\u5316\u7684\u6570\u636e\uff0c\u4f8b\u5982\u56fe\u7247\u3001\u89c6\u9891\u3001\u65e5\u5fd7\u6587\u4ef6\u3001\u5907\u4efd\u6570\u636e\u548c\u5bb9\u5668/\u865a\u62df\u673a\u955c\u50cf\u7b49\uff0c\u800c\u4e00\u4e2a\u5bf9\u8c61\u6587\u4ef6\u53ef\u4ee5\u662f\u4efb\u610f\u5927\u5c0f\uff0c\u4ece\u51e0 kb \u5230\u6700\u5927 5T \u4e0d\u7b49\u3002"),(0,i.kt)("p",null,"MinIO \u662f\u4e00\u4e2a\u975e\u5e38\u8f7b\u91cf\u7684\u670d\u52a1,\u53ef\u4ee5\u5f88\u7b80\u5355\u7684\u548c\u5176\u4ed6\u5e94\u7528\u7684\u7ed3\u5408\uff0c\u7c7b\u4f3c NodeJS, Redis \u6216\u8005 MySQL\u3002"),(0,i.kt)("p",null,"\u5b98\u65b9\u5bf9 Minio \u7684\u5b9a\u4e49\u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684\u5bf9\u8c61\u5b58\u50a8\u3002"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Build high performance data infrastructure\nfor machine learning, analytics and\napplication data workloads with MinIO \u3002")),(0,i.kt)("p",null,"Minio \u7684\u5b98\u65b9\u7f51\u7ad9\u662f ",(0,i.kt)("a",{parentName:"p",href:"https://min.io"},"https://min.io")," \uff0c\nMinio \u7684\u5b98\u65b9\u6587\u6863\u662f ",(0,i.kt)("a",{parentName:"p",href:"https://docs.min.io/cn/"},"https://docs.min.io/cn/")," \uff0c\nGitHub \u4ed3\u5e93\u5730\u5740\u662f\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://github.com/minio/minio"},"https://github.com/minio/minio")," \uff0c\u76ee\u524d\u6709 18.8k Stars (2019.11.9)"),(0,i.kt)("p",null,"Minio \u7684 benchmark \u8bf4\u660e\uff1a"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://min.io/resources/docs/MinIO-vs-HDFS-MapReduce-performance-comparison.pdf"},"https://min.io/resources/docs/MinIO-vs-HDFS-MapReduce-performance-comparison.pdf"),"\n",(0,i.kt)("a",{parentName:"p",href:"https://min.io/resources/docs/MinIO-throughput-benchmarks-on-NVMe-SSD.pdf"},"https://min.io/resources/docs/MinIO-throughput-benchmarks-on-NVMe-SSD.pdf"),"\n",(0,i.kt)("a",{parentName:"p",href:"https://min.io/resources/docs/Performance-comparison-Starburst-Presto-SQL.pdf"},"https://min.io/resources/docs/Performance-comparison-Starburst-Presto-SQL.pdf"),"\n",(0,i.kt)("a",{parentName:"p",href:"https://min.io/resources/docs/MinIO-throughput-benchmarks-on-HDD.pdf"},"https://min.io/resources/docs/MinIO-throughput-benchmarks-on-HDD.pdf"),"\n",(0,i.kt)("a",{parentName:"p",href:"https://min.io/resources/docs/Performance-comparison-Apache-Spark.pdf"},"https://min.io/resources/docs/Performance-comparison-Apache-Spark.pdf")),(0,i.kt)("h1",{id:"\u5feb\u901f\u5f00\u59cb\u4e00\u4e2a\u5355\u8282\u70b9\u7684-minio"},"\u5feb\u901f\u5f00\u59cb\u4e00\u4e2a\u5355\u8282\u70b9\u7684 MinIO"),(0,i.kt)("p",null,"MinIO \u5206\u4e3a\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\uff0c\u670d\u52a1\u7aef\u63d0\u4f9b\u4e00\u4e2a\u5bf9\u8c61\u5b58\u50a8\uff0c\u4e5f\u63d0\u4f9b\u4e00\u4e2a Web \u7684\u7ba1\u7406\u9875\u9762\u3002\u5ba2\u6237\u7aef\u662f\u7528\u6765\u7ba1\u7406\u3001\u67e5\u770b\u670d\u52a1\u7aef\u7684\u4e00\u4e2a\u5de5\u5177\u3002\u670d\u52a1\u7aef\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"minio")," \uff0c\u5ba2\u6237\u7aef\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"mc")," \u3002"),(0,i.kt)("h2",{id:"\u4f7f\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u542f\u52a8"},"\u4f7f\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u542f\u52a8"),(0,i.kt)("p",null,"\u9996\u5148\u5148\u4e0b\u8f7d\u670d\u52a1\u7aef\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5176\u6b21\u51c6\u5907\u4e00\u4e2a\u7528\u6765\u5b58\u50a8\u7684\u78c1\u76d8\u6216\u8005\u76ee\u5f55\uff0c"),(0,i.kt)("p",null,"\u4e0b\u8f7d\u597d\u4ee5\u540e\u8d4b\u4e88\u6267\u884c\u6743\u9650\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5feb\u901f\u542f\u52a8\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"chmod +x minio\n./minio server /erdong/data\n")),(0,i.kt)("p",null,"\u542f\u52a8\u540e\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee http://localhost:9000 \u6765\u8bbf\u95ee\u4f60\u7684\u5bf9\u8c61\u5b58\u50a8\u3002"),(0,i.kt)("h2",{id:"\u4f7f\u7528-docker-\u542f\u52a8"},"\u4f7f\u7528 Docker \u542f\u52a8"),(0,i.kt)("p",null,"MinIO \u9700\u8981\u4e00\u4e2a\u6301\u4e45\u5377\u6765\u5b58\u50a8\u914d\u7f6e\u548c\u5e94\u7528\u6570\u636e\u3002\u4e0d\u8fc7, \u5982\u679c\u53ea\u662f\u4e3a\u4e86\u6d4b\u8bd5\u4e00\u4e0b, \u60a8\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u5730\u4f20\u9012\u4e00\u4e2a\u76ee\u5f55\uff08\u5728\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"/erdong/data"),"\uff09\u542f\u52a8 MinIO \u3002\u8fd9\u4e2a\u76ee\u5f55\u4f1a\u5728\u5bb9\u5668\u542f\u52a8\u65f6\u5728\u5bb9\u5668\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u521b\u5efa\uff0c\u4e0d\u8fc7\u6240\u6709\u7684\u6570\u636e\u90fd\u4f1a\u5728\u5bb9\u5668\u9000\u51fa\u65f6\u4e22\u5931\u3002"),(0,i.kt)("p",null,"\u8981\u521b\u5efa\u5177\u6709\u6c38\u4e45\u5b58\u50a8\u7684 MinIO \u5bb9\u5668\uff0c\u60a8\u9700\u8981\u5c06\u672c\u5730\u6301\u4e45\u76ee\u5f55\u4ece\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u6620\u5c04\u5230\u865a\u62df\u914d\u7f6e ~/.minio \u5e76\u5bfc\u51fa /data \u76ee\u5f55\u3002 \u4e3a\u6b64\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'docker run -p 9000:9000 --name minio \\\n  -e "MINIO_ACCESS_KEY=minioadmin" \\\n  -e "MINIO_SECRET_KEY=minioadminpassword" \\\n  -v /erdong/minio/data:/data \\\n  -v /erdong/minio/config:/root/.minio \\\n  minio/minio server /data\n')),(0,i.kt)("p",null,"\u542f\u52a8\u540e\uff0c\u5373\u53ef\u8bbf\u95ee http://localhost:9000 \u6765\u8bbf\u95ee\u4f60\u7684\u5bf9\u8c61\u5b58\u50a8\u3002"),(0,i.kt)("p",null,"\u4e0a\u8ff0\u547d\u4ee4\u4e2d\u8bbe\u7f6e\u4e86\u5982\u4e0b\u53c2\u6570\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"MINIO_ACCESS_KEY \u7ba1\u7406\u5458\u7684\u8bbf\u95ee\u79d8\u94a5"),(0,i.kt)("li",{parentName:"ul"},"MINIO_SECRET_KEY \u7ba1\u7406\u5458\u7684\u79d8\u94a5"),(0,i.kt)("li",{parentName:"ul"},"/erdong/minio/data:/data  \u6302\u8f7d\u6301\u4e45\u5316\u6570\u636e\u76ee\u5f55"),(0,i.kt)("li",{parentName:"ul"},"/erdong/minio/config:/root/.minio  \u6302\u8f7d\u914d\u7f6e\u6587\u4ef6"),(0,i.kt)("li",{parentName:"ul"},"server \u542f\u52a8 Server \u6a21\u5f0f\uff0c\u9664\u4e86\u8be5\u6a21\u5f0f\u8fd8\u6709\u4e00\u4e2a Gateway \u6a21\u5f0f\u3002"),(0,i.kt)("li",{parentName:"ul"},"/data  \u6307\u5b9a\u6570\u636e\u76ee\u5f55")),(0,i.kt)("p",null,"\u5982\u679c\u9700\u8981\u6307\u5b9a\u7aef\u53e3\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u53c2\u6570"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'--address ":9000"\n')),(0,i.kt)("h1",{id:"\u4f7f\u7528-tls-\u5b89\u5168\u8bbf\u95ee-minio-\u670d\u52a1"},"\u4f7f\u7528 TLS \u5b89\u5168\u8bbf\u95ee MinIO \u670d\u52a1"),(0,i.kt)("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u770b\u5982\u4f55\u5728 linux \u4e0a\u914d\u7f6e MinIO \u670d\u52a1\u4f7f\u7528 TLS \u3002"),(0,i.kt)("p",null,"\u4f7f\u7528 TLS \u7684\u524d\u63d0\u662f\u5148\u4e0b\u8f7d\u597d MinIO Server \u3002"),(0,i.kt)("p",null,"\u5982\u679c\u4f60\u5df2\u7ecf\u6709\u79c1\u94a5\u548c\u516c\u94a5\u8bc1\u4e66\uff0c\u4f60\u9700\u8981\u5c06\u4ed6\u4eec\u62f7\u8d1d\u5230 MinIO \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$HOME/.minio/certs")," \u6587\u4ef6\u5939\uff0c\u79c1\u94a5\u7684\u540d\u5b57\u5fc5\u987b\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"private.key")," \uff0c\u516c\u94a5\u8bc1\u4e66\u7684\u540d\u5b57\u5fc5\u987b\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"public.crt")," \u3002 MinIO \u5728 Linux \u53ea\u652f\u6301\u4f7f\u7528 PEM \u683c\u5f0f\u7684\u79d8\u94a5\u548c\u8bc1\u4e66\uff0c\u5728 Windows \u4e0a\u53ea\u652f\u6301 PEM \u683c\u5f0f\u7684\u79d8\u94a5\u548c\u8bc1\u4e66\uff0c\u76ee\u524d\u4e0d\u652f\u6301 PFX \u8bc1\u4e66\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u8fd9\u4e2a\u8bc1\u4e66\u662f\u88ab\u8bc1\u4e66\u673a\u6784\u7b7e\u53d1\u7684\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"public.crt")," \u5e94\u8be5\u662f\u670d\u52a1\u5668\u7684\u8bc1\u4e66\u3002"),(0,i.kt)("p",null,"Linux \u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u5de5\u5177\u6765\u751f\u6210\u8bc1\u4e66"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Let\u2018s Encrypt"),(0,i.kt)("li",{parentName:"ul"},"generate_cert.go"),(0,i.kt)("li",{parentName:"ul"},"OpenSSL ")),(0,i.kt)("p",null,"Windows \u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u5de5\u5177\u6765\u751f\u6210\u8bc1\u4e66"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"GnuTLS")),(0,i.kt)("p",null,"Minio \u4e5f\u53ef\u4ee5\u914d\u7f6e\u6210\u8fde\u63a5\u5176\u5b83\u670d\u52a1\uff0c\u4e0d\u7ba1\u662f Minio \u8282\u70b9\u8fd8\u662f\u50cf NATs\u3001Redis \u8fd9\u4e9b\u3002\u5982\u679c\u8fd9\u4e9b\u670d\u52a1\u7528\u7684\u4e0d\u662f\u5728\u5df2\u77e5\u8bc1\u4e66\u673a\u6784\u6ce8\u518c\u7684\u8bc1\u4e66\uff0c\u4f60\u53ef\u4ee5\u8ba9 Minio \u670d\u52a1\u4fe1\u4efb\u8fd9\u4e9b CA \uff0c\u600e\u4e48\u505a\u5462\uff0c\u5c06\u8fd9\u4e9b\u8bc1\u4e66\u653e\u5230Minio\u914d\u7f6e\u8def\u5f84\u4e0b(~/.minio/certs/CAs/ Linux \u6216\u8005 C:","\\","Users","\\","\\<Username",">","\\",".minio","\\","certs","\\","CAs Windows)."),(0,i.kt)("h2",{id:"\u5982\u4f55\u4f7f\u7528-openssl-\u6765\u751f\u6210\u81ea\u7b7e\u8bc1\u4e66"},"\u5982\u4f55\u4f7f\u7528 OpenSSL \u6765\u751f\u6210\u81ea\u7b7e\u8bc1\u4e66"),(0,i.kt)("p",null,"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u751f\u6210\u79c1\u94a5\uff0c\u79c1\u94a5\u4f1a\u751f\u6210\u5728\u6267\u884c\u547d\u4ee4\u7684\u76ee\u5f55\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"openssl genrsa -out private.key 2048\n")),(0,i.kt)("p",null,"\u751f\u6210\u81ea\u7b7e\u540d\u7684\u8bc1\u4e66\uff0c\u8bc1\u4e66\u4f1a\u751f\u6210\u5728\u6267\u884c\u547d\u4ee4\u7684\u76ee\u5f55\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'openssl req -new -x509 -days 3650 -key private.key -out public.crt -subj "/C=US/ST=state/L=location/O=organization/CN=domain"\n')),(0,i.kt)("p",null,"\u5176\u4e2d\u76f8\u5173\u5185\u5bb9\u53ef\u4ee5\u6309\u7167\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff0c\u6bd4\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"/C")," \u662f\u56fd\u5bb6\uff0c\u4e2d\u56fd\u662f CN \uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"/ST")," \u662f\u5dde\u6216\u8005\u7701\uff0c ",(0,i.kt)("inlineCode",{parentName:"p"},"/L")," \u662f\u5e02\u6216\u8005\u533a\uff0c ",(0,i.kt)("inlineCode",{parentName:"p"},"/CN")," \u662f\u57df\u540d\u3002"),(0,i.kt)("p",null,"\u79d8\u94a5\u548c\u8bc1\u4e66\u751f\u6210\u597d\u4ee5\u540e\uff0c\u6309\u7167\u4e0a\u8fb9\u7684\u8981\u6c42\u653e\u7f6e\u5728\u5bf9\u5e94\u7684\u76ee\u5f55\u5373\u53ef\u3002"),(0,i.kt)("h1",{id:"qa"},"Q&A"),(0,i.kt)("p",null,"Thanos \u5728\u8fde\u63a5 MinIO \u7684\u65f6\u5019\u9047\u5230\u4e86\u4e00\u4e9b\u95ee\u9898\uff0c\u65e5\u5fd7\u91cc\u6709\u5f88\u591a\u9519\u8bef\u63d0\u793a\uff0c\u5217\u5728\u4e0b\u8fb9\u4f9b\u53c2\u8003\u3002"),(0,i.kt)("h2",{id:"1-\u63d0\u793a\u5192\u53f7\u592a\u591a"},"1. \u63d0\u793a\u5192\u53f7\u592a\u591a"),(0,i.kt)("p",null,"\u65e5\u5fd7\u62a5\u9519\u5982\u4e0b\u6240\u793a\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'level=info ts=2019-11-08T02:43:40.981858805Z caller=main.go:170 msg="Tracing will be disabled"\nlevel=info ts=2019-11-08T02:43:40.982326667Z caller=factory.go:39 msg="loading bucket configuration"\nlevel=error ts=2019-11-08T02:43:40.982682262Z caller=main.go:200 err="store command failed: create bucket client: create S3 client: initialize s3 client: address http://127.0.0.1:9000: too many colons in address"\n')),(0,i.kt)("p",null,"\u65e5\u5fd7\u63cf\u8ff0\u76f4\u8bd1\u8fc7\u6765\u5c31\u662f\u5192\u53f7\u592a\u591a\u4e86\uff0c\u539f\u56e0\u662f\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u586b\u5199\u4e86 MinIO \u63d0\u4f9b\u7684 S3 \u534f\u8bae\u7684 endpoint \u7684\u65f6\u5019\uff0c\u591a\u586b\u5199\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"http://")," \uff0c\u5bfc\u81f4\u63d0\u793a\u8be5\u9519\u8bef\u3002\u672c\u610f\u662f\u5728\u5185\u7f51\u4f7f\u7528\uff0c HTTP \u534f\u8bae\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e0d\u9700\u8981\u8981\u5f00\u542f HTTPS \uff0c\u4f46\u662f Thanos \u5728\u8fde\u63a5 S3 \u5b58\u50a8\u7684\u65f6\u5019\u9ed8\u8ba4\u662f\u4f7f\u7528 HTTPS \u7684\uff0c\u4e0d\u80fd\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6765\u4f7f\u7528 HTTP \u3002"),(0,i.kt)("p",null,"\u9519\u8bef\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'type: S3\nconfig:\n  bucket: "disk1"\n  endpoint: "http://127.0.0.1:9000"\n')),(0,i.kt)("p",null,"\u6b63\u786e\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'type: S3\nconfig:\n  bucket: "disk1"\n  endpoint: "127.0.0.1:9000"\n')),(0,i.kt)("h2",{id:"2-\u63d0\u793a\u5bf9\u65b9\u6ca1\u6709\u4f7f\u7528-https"},"2. \u63d0\u793a\u5bf9\u65b9\u6ca1\u6709\u4f7f\u7528 HTTPS"),(0,i.kt)("p",null,"\u65e5\u5fd7\u62a5\u9519\u5982\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'level=info ts=2019-11-08T02:42:04.366000876Z caller=main.go:170 msg="Tracing will be disabled"\nlevel=info ts=2019-11-08T02:42:04.366417674Z caller=factory.go:39 msg="loading bucket configuration"\nlevel=info ts=2019-11-08T02:42:04.384413714Z caller=cache.go:172 msg="created index cache" maxItemSizeBytes=131072000 maxSizeBytes=262144000 maxItems=math.MaxInt64\nlevel=error ts=2019-11-08T02:42:04.385632149Z caller=main.go:200 err="store command failed: bucket store initial sync: sync block: iter: Get https://127.0.0.1:9000/prometheus-store/?delimiter=%2F&max-keys=1000&prefix=: http: server gave HTTP response to HTTPS client"\n')),(0,i.kt)("p",null,"\u8fd9\u662f Thanos \u8fde\u63a5\u7684\u5bf9\u8c61\u5b58\u50a8\u53ea\u63d0\u4f9b\u4e86 HTTP \uff0c\u6ca1\u6709\u63d0\u4f9b HTTPS\uff0c\u8fd9\u4e2a\u65f6\u5019\u9700\u8981\u8ba9\u5bf9\u8c61\u5b58\u50a8\u6dfb\u52a0\u8bc1\u4e66\uff0c\u542f\u7528 HTTPS \u3002"),(0,i.kt)("h2",{id:"3-\u4e0d\u80fd\u591f\u8ba4\u8bc1\u67d0\u4e2a\u57df\u540d"},"3. \u4e0d\u80fd\u591f\u8ba4\u8bc1\u67d0\u4e2a\u57df\u540d"),(0,i.kt)("p",null,"\u65e5\u5fd7\u62a5\u9519\u5982\u4e0b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'level=info ts=2019-11-08T03:06:57.90508837Z caller=main.go:170 msg="Tracing will be disabled"\nlevel=info ts=2019-11-08T03:06:57.905445182Z caller=factory.go:39 msg="loading bucket configuration"\nlevel=info ts=2019-11-08T03:06:57.923283984Z caller=cache.go:172 msg="created index cache" maxItemSizeBytes=131072000 maxSizeBytes=262144000 maxItems=math.MaxInt64\nlevel=error ts=2019-11-08T03:06:57.927125234Z caller=main.go:200 err="store command failed: bucket store initial sync: sync block: iter: Get https://10.23.80.18:9000/prometheus-store/?delimiter=%2F&max-keys=1000&prefix=: x509: cannot validate certificate for minio-erdong.site because it doesn\'t contain any IP SANs"\n')),(0,i.kt)("p",null,"\u56e0\u4e3a Thanos \u8fde\u63a5 Minio \u7684 HTTP \u914d\u7f6e\u91cc\uff0c\u6709\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"insecure_skip_verify")," \u9009\u9879\uff0c\u8be5\u9009\u9879\u9ed8\u8ba4\u4e3a false \uff0c\u9700\u8981\u5bf9\u57df\u540d\u7684\u8bc1\u4e66\u8fdb\u884c\u9a8c\u8bc1\uff0c\u7531\u4e8e\u4f7f\u7528\u4e86\u81ea\u7b7e\u8bc1\u4e66\uff0c\u6ca1\u6709\u5728\u6743\u5a01\u7684 CA \u673a\u6784\u505a\u8ba4\u8bc1\uff0c\u6240\u4ee5\u5728\u8fde\u63a5\u8fc7\u7a0b\u4e2d\u4f1a\u63d0\u793a\u4e0d\u5b89\u5168\uff0c\u5c06\u503c\u6539\u4e3a true\uff0c\u8df3\u8fc7\u8fd9\u4e2a\u9a8c\u8bc1\u5c31\u53ef\u4ee5\u4e86\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"  http_config:\n    idle_conn_timeout: 90s\n    response_header_timeout: 2m\n    insecure_skip_verify: true\n")),(0,i.kt)("h1",{id:"end"},"end"))}u.isMDXComponent=!0}}]);